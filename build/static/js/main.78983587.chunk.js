(this["webpackJsonpempty-react"]=this["webpackJsonpempty-react"]||[]).push([[1],{22:function(e,t,n){"use strict";var a=n(31);t.a=Object(a.a)(Object(a.a)({},n(327).default),{},{ABI:{L2:[{inputs:[{internalType:"address",name:"_admin",type:"address"},{internalType:"bytes32",name:"_adminPubKey",type:"bytes32"},{internalType:"bytes32",name:"_genesisStateHash",type:"bytes32"},{internalType:"contract IERC20",name:"_feeToken",type:"address"},{internalType:"uint256",name:"_minFeeTokenDeposit",type:"uint256"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"accountID",type:"uint32"},{indexed:!1,internalType:"uint16",name:"tokenID",type:"uint16"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"CompleteExit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint256",name:"withdrawID",type:"uint256"},{indexed:!0,internalType:"address",name:"destAddress",type:"address"},{indexed:!1,internalType:"uint16",name:"tokenID",type:"uint16"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"CompleteWithdraw",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"contract IERC20",name:"token",type:"address"},{indexed:!1,internalType:"uint256",name:"minDepositAmount",type:"uint256"}],name:"MinDepositSet",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"previousOwner",type:"address"},{indexed:!0,internalType:"address",name:"newOwner",type:"address"}],name:"OwnershipTransferred",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"blockNumber",type:"uint32"}],name:"SubmitBlock",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"accountID",type:"uint32"},{indexed:!1,internalType:"uint48",name:"depositID",type:"uint48"},{indexed:!1,internalType:"uint16",name:"tokenID",type:"uint16"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"SubmitDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"withdrawTo",type:"address"},{indexed:!1,internalType:"uint48",name:"depositID",type:"uint48"},{indexed:!1,internalType:"bytes32",name:"pubKey",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"accountID",type:"uint256"},{indexed:!1,internalType:"uint16",name:"tokenID",type:"uint16"},{indexed:!1,internalType:"uint256",name:"amount",type:"uint256"}],name:"SubmitDepositToNew",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"accountID",type:"uint32"}],name:"SubmitExit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"uint32",name:"blockNumber",type:"uint32"},{indexed:!1,internalType:"bytes32",name:"zkProofHash",type:"bytes32"}],name:"SubmitZkProof",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"contract IERC20",name:"token",type:"address"},{indexed:!1,internalType:"bool",name:"isEnabled",type:"bool"}],name:"TokenEnabled",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"contract IERC20",name:"token",type:"address"},{indexed:!1,internalType:"uint16",name:"tokenID",type:"uint16"},{indexed:!1,internalType:"uint256",name:"minDepositAmount",type:"uint256"}],name:"TokenListed",type:"event"},{inputs:[{internalType:"uint32",name:"accountID",type:"uint32"},{internalType:"uint16[]",name:"_tokenIDs",type:"uint16[]"},{internalType:"uint256[]",name:"_amounts",type:"uint256[]"},{internalType:"bytes32[]",name:"siblings",type:"bytes32[]"}],name:"completeExit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256[]",name:"withdrawIDs",type:"uint256[]"}],name:"completeWithdraw",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"accountID",type:"uint32"},{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"deposit",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint48",name:"",type:"uint48"}],name:"depositHashes",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"publicKey",type:"bytes32"},{internalType:"address",name:"withdrawTo",type:"address"},{internalType:"contract IERC20",name:"token",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"}],name:"depositNewUser",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"_token",type:"address"},{internalType:"bool",name:"_isEnabled",type:"bool"}],name:"enableToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"",type:"uint32"}],name:"exitRequests",outputs:[{internalType:"uint256",name:"timeStamp",type:"uint256"},{internalType:"bool",name:"isConfirmed",type:"bool"},{internalType:"address",name:"withdrawTo",type:"address"},{internalType:"bytes32",name:"balanceRoot",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getBlockDetails",outputs:[{internalType:"bytes32",name:"blockRoot",type:"bytes32"},{internalType:"bytes32",name:"zkProofHash",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"}],name:"getBlockRoot",outputs:[{internalType:"bytes32",name:"blockRoot",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getGenesisStateHash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"getTokens",outputs:[{internalType:"contract IERC20[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint32",name:"",type:"uint32"},{internalType:"uint16",name:"",type:"uint16"}],name:"isCompleteExits",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"lastestBlock",outputs:[{internalType:"bytes32",name:"blockRoot",type:"bytes32"},{internalType:"uint256",name:"blockNumber",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"contract IERC20",name:"_token",type:"address"},{internalType:"uint256",name:"_minDepositAmount",type:"uint256"}],name:"listToken",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"numDeposits",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[],name:"numIncludedDeposits",outputs:[{internalType:"uint48",name:"",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[],name:"numOccupiedAccounts",outputs:[{internalType:"uint32",name:"",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"numWithdraws",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"owner",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"pubKeyToAccountData",outputs:[{internalType:"bool",name:"isAdded",type:"bool"},{internalType:"uint32",name:"accountID",type:"uint32"}],stateMutability:"view",type:"function"},{inputs:[],name:"renounceOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"_token",type:"address"},{internalType:"uint256",name:"_minDepositAmount",type:"uint256"}],name:"setMinDepositAmount",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"blockNumber",type:"uint32"},{internalType:"bytes[]",name:"miniBlocks",type:"bytes[]"},{internalType:"uint32",name:"timeStamp",type:"uint32"}],name:"submitBlock",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint32",name:"accountID",type:"uint32"},{internalType:"bytes32",name:"balanceRoot",type:"bytes32"},{internalType:"uint32",name:"submitTimeStamp",type:"uint32"},{internalType:"uint256",name:"blockNumber",type:"uint256"},{internalType:"bytes",name:"proofData",type:"bytes"}],name:"submitExit",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"blockNumber",type:"uint256"},{internalType:"uint256[]",name:"zkProof",type:"uint256[]"}],name:"submitZkProof",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"contract IERC20",name:"",type:"address"}],name:"tokenInfos",outputs:[{internalType:"bool",name:"isListed",type:"bool"},{internalType:"bool",name:"isEnabled",type:"bool"},{internalType:"uint16",name:"tokenID",type:"uint16"},{internalType:"uint256",name:"minDepositAmount",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"newOwner",type:"address"}],name:"transferOwnership",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint48",name:"depositID",type:"uint48"},{internalType:"bytes32",name:"depositHash",type:"bytes32"}],name:"verifyDepositData",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"withdrawRequests",outputs:[{internalType:"uint16",name:"tokenID",type:"uint16"},{internalType:"uint32",name:"amountMantisa",type:"uint32"},{internalType:"uint8",name:"amountExp",type:"uint8"},{internalType:"address",name:"destAddress",type:"address"},{internalType:"bool",name:"isCompleted",type:"bool"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],ERC20:[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"minter",outputs:[{name:"",type:"address"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_spender",type:"address"},{name:"_value",type:"uint256"}],name:"approve",outputs:[{name:"o_success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_recipient",type:"address"},{name:"_value",type:"uint256"}],name:"createIlliquidToken",outputs:[{name:"o_success",type:"bool"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_from",type:"address"},{name:"_recipient",type:"address"},{name:"_amount",type:"uint256"}],name:"transferFrom",outputs:[{name:"o_success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"endMintingTime",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_recipient",type:"address"},{name:"_value",type:"uint256"}],name:"createToken",outputs:[{name:"o_success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"",type:"address"}],name:"illiquidBalance",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,type:"function"},{constant:!1,inputs:[{name:"_recipient",type:"address"},{name:"_amount",type:"uint256"}],name:"transfer",outputs:[{name:"o_success",type:"bool"}],payable:!1,type:"function"},{constant:!0,inputs:[],name:"LOCKOUT_PERIOD",outputs:[{name:"",type:"uint256"}],payable:!1,type:"function"},{constant:!0,inputs:[{name:"_owner",type:"address"},{name:"_spender",type:"address"}],name:"allowance",outputs:[{name:"o_remaining",type:"uint256"}],payable:!1,type:"function"},{constant:!1,inputs:[],name:"makeLiquid",outputs:[],payable:!1,type:"function"},{inputs:[{name:"_minter",type:"address"},{name:"_endMintingTime",type:"uint256"}],payable:!1,type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,name:"_from",type:"address"},{indexed:!0,name:"_recipient",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_owner",type:"address"},{indexed:!0,name:"_spender",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"Approval",type:"event"}]},TOPICS:{},DEFAULT_GAS:{APPROVE:1e5,APPROVE_MAX:7e4,DEPOSIT:3e5},STEPS:{APPROVE:"APPROVE",DEPOSIT:"DEPOSIT"}})},315:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return r}));n(31);var a=n(59);n(316),n(42),n(114),n(22);function r(t){var n=a.privateToAddress(new e(t,"hex"));return a.bufferToHex(n)}}).call(this,n(1).Buffer)},324:function(e,t,n){},326:function(e,t,n){},327:function(e,t,n){"use strict";n.r(t),t.default={NETWORK_ID:42,CHAIN_NAME:"kovan",URLS:{ETHERSCAN:"https://kovan.etherscan.io",ENJINX:"https://kyber.enjinx.io"},NODE:{URL:"https://kovan.infura.io/v3/aae8b1a2cb21490294c7ab5d5123d9f8",CONNECTION_TIMEOUT:6e3},TOKENS:{ETH:{address:"0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",decimal:18}},CONTRACTS:{L2:"0x87DA7F1AD209c65c11ab71f3c8F0d1E745B00B1b"}}},339:function(e,t){},347:function(e,t){},363:function(e,t){},365:function(e,t){},382:function(e,t){},383:function(e,t){},385:function(e,t){},386:function(e,t){},457:function(e,t){},459:function(e,t){},468:function(e,t){},470:function(e,t){},495:function(e,t){},497:function(e,t){},503:function(e,t){},504:function(e,t){},506:function(e,t){},518:function(e,t){},521:function(e,t){},525:function(e,t){},537:function(e,t){},606:function(e,t){},636:function(e,t){},666:function(e,t){},729:function(e,t){},735:function(e,t){},747:function(e,t){},763:function(e,t){},766:function(e,t){},773:function(e,t,n){"use strict";n.r(t);var a=n(5),r=n(17),i=n.n(r),u=n(170),o=n.n(u),c=(n(324),n(2)),s=n.n(c),p=n(18),l=(n(326),n(31)),y=n(776),d=n(22),f=n(51),m=n.n(f),b=n(59),v=n(30),h=n.n(v);function T(e){return new h.a(e.toString()).div(1e9).toString()}function x(e){return w(e,9)}function w(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18,n=new h.a(e.toString());return n.times(Math.pow(10,t)).toFixed(0)}function k(e){return"0x"+new h.a(e).toString(16)}function O(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return 0;var a=new h.a(e),r=a.toFixed().toString(),i=r.indexOf("."),u=-1!==i?r.slice(0,i+(t+1)):r;return n?g(u,t):u}function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e)return 0;if(e<1)return+(+e).toFixed(6);var n=new h.a(e),a=(n=n.toFormat(t)).split(".");return 2!==a.length||+a[1]||(n=a[0]),n}var j=new m.a(new m.a.providers.HttpProvider(d.a.NODE.URL,d.a.NODE.CONNECTION_TIMEOUT)),P=new j.eth.Contract(d.a.ABI.L2),I=new j.eth.Contract(d.a.ABI.ERC20),S=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0x0",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u={from:n,to:e,value:a,data:t};return null!==r&&(u.gasPrice=k(x(r))),null!==i&&(u.gas=k(i)),u},K={getAccountID:function(e){return console.log(d.a.CONTRACTS.L2),new Promise((function(t,n){var a=P.methods.pubKeyToAccountData(e).encodeABI();j.eth.call({to:d.a.CONTRACTS.L2,data:a}).then((function(e){var n=j.eth.abi.decodeParameters(["bool","uint32"],e);t(parseInt(n[1]))})).catch((function(e){n(e)}))}))},fetchTokenBalance:function(e,t){var n=I;return n.options.address=t,new Promise((function(a,r){var i=n.methods.balanceOf(e).encodeABI();j.eth.call({to:t,data:i}).then((function(e){var t=j.eth.abi.decodeParameters(["uint256"],e);a(t[0])})).catch((function(e){r(e)}))}))},fetchTokenAllowance:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.a.CONTRACTS.L2,a=I;a.options.address=t;var r=a.methods.allowance(e,n).encodeABI();return new Promise((function(e,n){j.eth.call({to:t,data:r}).then((function(t){var n=j.eth.abi.decodeParameters(["uint256"],t);e(n[0])})).catch((function(e){n(e)}))}))},getDepositTxObject:function(e,t,n,a){var r,i=P.methods.deposit(t,n,k(w(a))).encodeABI();return n==d.a.TOKENS.ETH.address&&(r=k(w(a))),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return S(d.a.CONTRACTS.L2,i,e,r,t,n)}},getApproveTxObject:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d.a.CONTRACTS.L2,r=t?"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff":0,i=I;i.options.address=n;var u=i.methods.approve(a,r).encodeABI();return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return S(n,u,e,null,t,a)}},checkTxMined:function(){var e=Object(p.a)(s.a.mark((function e(t){var n,a,r,i,u=arguments;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:null,e.next=3,j.eth.getTransactionReceipt(t);case 3:if(null===(a=e.sent)){e.next=20;break}if(n){e.next=7;break}return e.abrupt("return",a.status);case 7:if(r=a.logs,a.blockNumber){e.next=11;break}return e.abrupt("return",null);case 11:if(r.length){e.next=13;break}return e.abrupt("return",!1);case 13:i=0;case 14:if(!(i<r.length)){e.next=20;break}if(r[i].topics[0].toLowerCase()!==n.toLowerCase()){e.next=17;break}return e.abrupt("return",!0);case 17:++i,e.next=14;break;case 20:return e.abrupt("return",null);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),estimateGas:function(){var e=Object(p.a)(s.a.mark((function e(t,n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,a){j.eth.estimateGas(t).then((function(t){return e(Math.round(1.3*t))})).catch((function(e){a(Math.round(1.3*d.a.DEFAULT_GAS[n]))}))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getZkKeyPair:function(){var e=Object(p.a)(s.a.mark((function e(t){var n,a,r,i,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.zksync.Signer.fromETHSignature(t);case 3:return n=e.sent,a=n.signer.privateKey,r=b.bufferToHex(Array.from(a)),i=window.zksyncCrypto.private_key_to_pubkey(a),u=b.bufferToHex(Array.from(i)),e.abrupt("return",{zkPrivateKey:r,zkPublicKey:u});case 11:e.prev=11,e.t0=e.catch(0),alert(e.t0);case 14:return e.abrupt("return",{});case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},C=n(33),D=function(e){return function(){var t=Object(r.useState)(e.value),n=Object(C.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){var t=e.subscribe({next:function(e){return i(e)}});return function(){return t.unsubscribe()}}),[]),a}},E=function(){return{address:localStorage.getItem("address"),type:localStorage.getItem("type"),id:null,privateKey:localStorage.getItem("privateKey"),zkPrivateKey:localStorage.getItem("zkPrivateKey"),zkPublicKey:localStorage.getItem("zkPublicKey"),wallet:null,txHash:null}},A=new y.a(E()),_={store:A,useAccount:D(A),import:function(e){var t=e.address,n=e.type,a=e.privateKey,r=e.zkPrivateKey,i=e.zkPublicKey,u=e.wallet;A.next(Object(l.a)(Object(l.a)({},A.value),{},{address:t,type:n,privateKey:a,zkPrivateKey:r,zkPublicKey:i,wallet:u})),localStorage.setItem("address",t),localStorage.setItem("type",n),a&&localStorage.setItem("privateKey",a),localStorage.setItem("zkPrivateKey",r),localStorage.setItem("zkPublicKey",i)},clear:function(){localStorage.removeItem("address"),localStorage.removeItem("type"),localStorage.removeItem("privateKey"),localStorage.removeItem("zkPrivateKey"),localStorage.removeItem("zkPublicKey"),A.next(E())},getAccountID:function(){var e=Object(p.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.getAccountID(A.value.zkPublicKey);case 2:t=e.sent,A.next(Object(l.a)(Object(l.a)({},A.value),{},{id:t}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),setTxHash:function(e){A.next(Object(l.a)(Object(l.a)({},A.value),{},{txHash:e}))}},M=n(313),z=n.n(M),R=new y.a({content:""}),N={store:R,show:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};R.next({content:e,onClose:t})}},F={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},B=function(){var e=Object(r.useState)({content:""}),t=Object(C.a)(e,2),n=t[0],i=t[1];return Object(r.useEffect)((function(){N.store.subscribe({next:function(e){i(e)}})}),[]),Object(a.jsx)(z.a,{isOpen:""!=n.content,ariaHideApp:!1,style:F,onRequestClose:function(){i({content:""}),n.onClose()},children:n.content})},H=new y.a({data:[{address:"0xc9b8548f0fdc231bdc08b74f5ac888677a15d620",decimals:18,balance:0}]}),L={store:H,useCurrency:D(H),fetchBalance:function(e){if(e){var t=H.value.data,n=function(n){K.fetchTokenBalance(e,t[n].address).then((function(e){t[n].balance=+function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;return e?new h.a(e.toString()).div(Math.pow(10,t)).toString():0}(e,t[n].decimals),H.next({data:t})}))};for(var a in t)n(a)}}};function U(e,t){var n=new h.a(e),a=new h.a(t);return n.comparedTo(a)}function W(e,t){var n=new h.a(e),a=new h.a(t);return n.multipliedBy(a).toString()}function q(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7;return O(W(T(e),t),n)}var G=function(e){var t=e.txObject,n=e.type,a=Object(r.useState)(20),i=Object(C.a)(a,2),u=i[0],o=i[1],c=Object(r.useState)(null),l=Object(C.a)(c,2),y=l[0],d=l[1],f=Object(r.useState)(null),m=Object(C.a)(f,2),b=m[0],v=m[1];return Object(r.useEffect)((function(){function e(){return(e=Object(p.a)(s.a.mark((function e(){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K.estimateGas(t,n);case 2:a=e.sent,r=q(u,a),o(u),d(a),v(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),{gasPrice:u,gas:y,txFee:b}},V=function(){var e=L.useCurrency().data[0],t=Object(r.useState)(0),n=Object(C.a)(t,2),i=n[0],u=n[1],o=_.useAccount(),c=Object(r.useState)([]),l=Object(C.a)(c,2),y=l[0],d=l[1];function f(){return(f=Object(p.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,K.fetchTokenAllowance(o.address,e.address);case 2:+(n=t.sent)<=0?d([{component:J,props:{currency:e,isApproveToMax:!0}},{component:Y},{component:X,props:{amount:i,currency:e}},{component:Y},{component:Q,props:{}}]):-1===U(n,w(i))?d([{component:J,props:{currency:e,isApproveToMax:!1}},{component:Y},{component:J,props:{currency:e,isApproveToMax:!0}},{component:Y},{component:X,props:{amount:i,currency:e}},{component:Y},{component:Q,props:{}}]):d([{component:X,props:{amount:i,currency:e}},{component:Y},{component:Q,props:{}}]);case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{onChange:function(e){return u(e.target.value)}}),Object(a.jsx)("button",{onClick:function(){return f.apply(this,arguments)},children:"Deposit"}),"balance: ",e.balance,Object(a.jsx)(Z,{flow:y,cancelFlow:function(){d([])}})]})},Z=function(e){var t=e.flow,n=e.cancelFlow,i=Object(r.useState)(0),u=Object(C.a)(i,2),o=u[0],c=u[1];return Object(r.useEffect)((function(){if(0==t.length)return c(0),void N.show("");if(o>=t.length)n();else{var e=t[o].component;N.show(Object(a.jsx)(e,Object(l.a)({nextStep:function(){return c((function(e){return e+1}))},cancelFlow:n},t[o].props)),n)}}),[o,t]),Object(a.jsx)(a.Fragment,{})},J=function(e){var t=e.nextStep,n=e.cancelFlow,r=e.currency,i=e.isApproveToMax,u=_.useAccount(),o=K.getApproveTxObject(u.address,i,r.address),c=G({txObject:o(),type:d.a.STEPS.APPROVE}),l=c.gasPrice,y=c.gas,f=function(){var e=Object(p.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.wallet.makeTransaction(o(l,y),u.privateKey,u.devicePath);case 2:n=e.sent,_.setTxHash(n),t();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsxs)("div",{children:[" approve to ",i?"max":"0"," step ",Object(a.jsx)("button",{onClick:f,children:"next"}),Object(a.jsx)("button",{onClick:n,children:"cancel"})]})},X=function(e){var t=e.nextStep,n=e.cancelFlow,r=e.amount,i=e.currency,u=_.useAccount(),o=K.getDepositTxObject(u.address,u.id,i.address,r),c=G({txObject:o(),type:d.a.STEPS.DEPOSIT}),l=c.gasPrice,y=c.gas;function f(){return(f=Object(p.a)(s.a.mark((function e(){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.wallet.makeTransaction(o(l,y),u.privateKey,u.devicePath);case 2:n=e.sent,_.setTxHash(n),t();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.jsxs)("div",{children:[" deposit step ",Object(a.jsx)("button",{onClick:function(){return f.apply(this,arguments)},children:"next"}),Object(a.jsx)("button",{onClick:n,children:"cancel"})]})},Y=function(e){var t=e.nextStep,n=e.cancelFlow,i=_.useAccount();return Object(r.useEffect)((function(){var e=setInterval((function(){K.checkTxMined(i.txHash).then((function(t){if(null!==t){if(clearInterval(e),t)return void alert("mined");alert("error")}}))}),1e3);return function(){return clearInterval(e)}}),[]),Object(a.jsxs)("div",{children:[" broadcast step txhash:",i.txHash,Object(a.jsx)("button",{onClick:t,children:"next"}),Object(a.jsx)("button",{onClick:n,children:"cancel"})]})},Q=function(e){var t=e.nextStep,n=e.cancelFlow;return Object(a.jsxs)("div",{children:[" done step  ",Object(a.jsx)("button",{onClick:t,children:"next"}),Object(a.jsx)("button",{onClick:n,children:"cancel"})," "]})},$=n(73),ee=n.n($),te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ethereum:window.ethereum,web3:new m.a(window.ethereum||m.a.givenProvider||window.web3.currentProvider||window.web3.givenProvider)};return{connect:function(){var t=Object(p.a)(s.a.mark((function t(){var n,a,r,i,u,o=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=o.length>0&&void 0!==o[0]?o[0]:null,a=o.length>1&&void 0!==o[1]?o[1]:null,e.ethereum){t.next=5;break}return"function"===typeof n&&n(),t.abrupt("return",!1);case 5:if((r=+e.ethereum.networkVersion)===d.a.NETWORK_ID){t.next=9;break}return"function"===typeof a&&a(r),t.abrupt("return",!1);case 9:if(!_.store.value.address){t.next=13;break}return t.next=12,e.ethereum.enable();case 12:return t.abrupt("return");case 13:return t.next=15,e.ethereum.enable();case 15:return i=t.sent,t.next=18,K.getZkKeyPair(new ee.a.providers.Web3Provider(e.ethereum).getSigner());case 18:return u=t.sent,t.abrupt("return",{address:i[0],zkPrivateKey:u.zkPrivateKey,zkPublicKey:u.zkPublicKey,type:"metamask"});case 20:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),getDisconnected:function(t){e.ethereum&&(e.ethereum.on("accountsChanged",(function(e){e[0]!==_.store.value.address&&t()})),e.ethereum.on("chainChanged",(function(e){+e!==d.a.NETWORK_ID&&(console.log("chainChanged"),t())})))},makeTransaction:function(){var t=Object(p.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,a){e.web3.eth.sendTransaction(n,(function(e,n){e?a(e.message):t(n)}))}));case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}},ne=new m.a(new m.a.providers.HttpProvider(d.a.NODE.URL,d.a.NODE.CONNECTION_TIMEOUT)),ae=function(e,t){return new Promise((function(n,a){ne.eth.accounts.signTransaction(e,t,(function(e,t){e?a(e.message):n(t)}))}))},re=function(e){return new Promise((function(t,n){ne.eth.sendSignedTransaction(e,(function(e,a){e?n(e.message):t(a)}))}))},ie=function(){return{makeTransaction:function(){var e=Object(p.a)(s.a.mark((function e(t,n){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ae(t,n);case 2:return a=e.sent,e.next=5,re(a.rawTransaction);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},ue=n(172),oe=n.n(ue),ce=void 0,se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{connectorSDK:new oe.a};return{connect:function(){var t=Object(p.a)(s.a.mark((function t(){var n,a,r=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:null,r.length>1&&void 0!==r[1]?r[1]:null,t.next=4,e.connectorSDK.connect();case 4:if(n=t.sent,!_.store.value.address){t.next=7;break}return t.abrupt("return");case 7:return a={zkPrivateKey:"0x03ebfd45eb18b5edba1e9dd0a66ae13aabc8cd89710982f88f51922a3b442d54",zkPublicKey:"0x044baf7cfbdcf181234bfd270a184da4a98cd146a540a64439a1118fd63b2413"},t.abrupt("return",{address:n.accounts[0],zkPrivateKey:a.zkPrivateKey,zkPublicKey:a.zkPublicKey,type:"walletconnect"});case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),makeTransaction:function(){var t=Object(p.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.connectorSDK.connector.sendTransaction(n);case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),getDisconnected:function(t){e.connectorSDK.connector.on("disconnect",(function(){ce.handleClearAccount(t)})),e.connectorSDK.connector.on("session_update",(function(){ce.handleClearAccount(t)}))}}};var pe=function(){var e=Object(p.a)(s.a.mark((function e(t){var n,a,r,i,u,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("address"),a=localStorage.getItem("privateKey"),r=localStorage.getItem("zkPrivateKey"),i=localStorage.getItem("zkPublicKey"),"metamask"==t?(u=te(),_.import({wallet:u,address:n,type:t,privateKey:a,zkPrivateKey:r,zkPublicKey:i}),u.connect((function(){alert("connect err")}),(function(){alert("network err")})),u.getDisconnected(_.clear)):"private"==t?_.import({wallet:ie(),address:n,type:t,privateKey:a,zkPrivateKey:r,zkPublicKey:i}):"walletconnect"==t&&((o=se()).connect(),_.import({wallet:o,address:n,type:t,privateKey:a,zkPrivateKey:r,zkPublicKey:i})),e.abrupt("return",undefined);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=function(){var e=Object(p.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=te(),e.next=3,t.connect((function(){alert("connect err")}),(function(){alert("network err")}));case 3:n=e.sent,_.import({address:n.address,zkPrivateKey:n.zkPrivateKey,zkPublicKey:n.zkPublicKey,type:"metamask",wallet:t}),t.getDisconnected(_.clear);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(a.jsx)("button",{onClick:e,children:" metamask "})},ye=n(315),de=function(){var e=Object(r.useState)(""),t=Object(C.a)(e,2),n=t[0],i=t[1],u=function(){var e=Object(p.a)(s.a.mark((function e(t){var n,a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(ye.a)(t),e.next=3,K.getZkKeyPair(new ee.a.Wallet("0x"+t));case 3:a=e.sent,r=ie(),_.import({address:n,zkPrivateKey:a.zkPrivateKey,zkPublicKey:a.zkPublicKey,type:"private",privateKey:t,wallet:r}),N.show("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{placeholder:"key",onChange:function(e){return i(e.target.value)}}),Object(a.jsx)("button",{onClick:function(){return u(n)},children:"submit"})]})},fe=function(){return Object(a.jsx)("button",{onClick:function(){return N.show(Object(a.jsx)(de,{}))},children:"private key"})};function me(){return be.apply(this,arguments)}function be(){return(be=Object(p.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=se(),e.next=3,t.connect();case 3:n=e.sent,_.import({address:n.address,zkPrivateKey:n.zkPrivateKey,zkPublicKey:n.zkPublicKey,type:"walletconnect",wallet:t}),t.getDisconnected(_.clear);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.ethers=ee.a;var ve=function(){return Object(a.jsx)("button",{onClick:me,children:"wallet connect"})};function he(){return(he=Object(p.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.e(0).then(n.bind(null,785));case 3:return t=e.sent,e.next=6,Promise.all([n.e(0),n.e(4)]).then(n.t.bind(null,860,7));case 6:a=e.sent,window.zksync=a,window.zksyncCrypto=t,e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Unexpected error in loadWasm. [Message: ".concat(e.t0.message,"]"));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}var Te=function(){var e=_.useAccount(),t=L.useCurrency();return console.log("----",e,t),function(){var e=_.useAccount();Object(r.useEffect)((function(){e.address&&_.getAccountID();var t=setInterval((function(){L.fetchBalance(e.address)}),2e3);return function(){return clearInterval(t)}}),[e.address]),Object(r.useEffect)(Object(p.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("address"),n=localStorage.getItem("type"),t&&n&&pe(n);case 3:case"end":return e.stop()}}),e)}))),[])}(),Object(r.useEffect)((function(){!function(){he.apply(this,arguments)}()}),[]),Object(a.jsxs)("div",{className:"App",children:[e.address?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{onClick:function(){return _.clear()},children:"clear account"}),"Your address: ",e.address,Object(a.jsx)(V,{})]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(le,{}),Object(a.jsx)(fe,{}),Object(a.jsx)(ve,{})]}),Object(a.jsx)(B,{})]})},xe=function(e){e&&e instanceof Function&&n.e(5).then(n.bind(null,861)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,u=t.getTTFB;n(e),a(e),r(e),i(e),u(e)}))};o.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(Te,{})}),document.getElementById("root")),xe()}},[[773,2,3]]]);
//# sourceMappingURL=main.78983587.chunk.js.map